<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Interactive Cookbook</title>
<style>
    :root{
      /* Your palette */
      --primary:#e1b6b6;        /* soft rose */
      --accent-green:#1a2f23;  /* deep green */
      --accent-warm:#8e7158;   /* warm taupe */

      /* System colors */
      --cream:#FBF6EF;
      --blush: var(--primary);
      --rose: #e7c2c2;
      --gold: var(--accent-warm);
      --ink: var(--accent-green);
      --paper:#FFFFFF;

      --shadow: 0 14px 35px rgba(26,47,35,.08);
      --radius: 18px;
      --serif: "Georgia", "Times New Roman", serif;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(225,182,182,.55), transparent 55%),
        radial-gradient(1000px 650px at 90% 15%, rgba(142,113,88,.18), transparent 55%),
        linear-gradient(180deg, var(--cream), #fff);
      color:var(--ink);
      font-family:var(--sans);
      line-height:1.55;
    }

    /* Layout (mobile-first) */
    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:18px 14px 88px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }

    /* Cards */
    .card{
      background:var(--paper);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:1px solid rgba(142,113,88,.28);
      overflow:hidden;
    }
    .card .inner{ padding:18px 18px 16px; }

    /* Header / Cover (inside cookbook page) */
    .cover{
      border-radius: 26px;
      overflow:hidden;
      position:relative;
      box-shadow: var(--shadow);
      border:1px solid rgba(142,113,88,.28);
      background:
        linear-gradient(120deg, rgba(225,182,182,.70), rgba(251,246,239,.96) 45%, rgba(142,113,88,.14)),
        radial-gradient(900px 380px at 15% 35%, rgba(26,47,35,.08), transparent 58%);
    }
    .cover .inner{
      padding:22px 16px 18px;
      display:flex;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{
      font-family:var(--serif);
      letter-spacing:.4px;
      margin:0;
      font-size: clamp(30px, 6vw, 44px);
      line-height:1.08;
    }
    .subtitle{
      margin:10px 0 0;
      max-width: 720px;
      font-size: 15px;
      color: rgba(26,47,35,.78);
    }
    .gold-rule{
      height:2px;
      width:92px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin:14px 0 0;
      border-radius:2px;
    }
    .badge{
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(142,113,88,.35);
      font-size: 12px;
      letter-spacing:.2px;
      white-space:nowrap;
    }

    /* Recipe sections */
    .section{
      padding:18px 18px 16px;
      border-bottom: 1px solid rgba(142,113,88,.18);
      background: linear-gradient(180deg, rgba(251,246,239,.65), rgba(255,255,255,.95));
      margin-top: 28px; /* page-turn feel */
    }
    .section:first-of-type{ margin-top:0; }
    .section:last-child{ border-bottom:none; }

    .section h2{
      font-family:var(--serif);
      margin:0;
      font-size:22px;
      letter-spacing:.2px;
    }
    .meta{
      margin:8px 0 0;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      color: rgba(26,47,35,.72);
      font-size:13px;
    }
    .pill{
      padding:6px 10px;
      border-radius:999px;
      background: rgba(225,182,182,.28);
      border: 1px solid rgba(142,113,88,.22);
    }

    .content{
      padding:16px 18px 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-bottom: 36px; /* page-turn feel */
    }
    @media (min-width: 860px){
      .content{ grid-template-columns: 1fr 1fr; }
      .controls button{ width:auto; }
    }

    .box{
      border-radius: 18px;
      border: 1px solid rgba(142,113,88,.20);
      background: rgba(255,255,255,.92);
      padding: 14px 14px 12px;
      box-shadow: 0 10px 24px rgba(0,0,0,.05);
    }
    .box h3{
      font-family: var(--serif);
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:.2px;
    }

    /* Ingredient checklist */
    .checklist{
      list-style:none;
      padding:0;
      margin:0;
      display:grid;
      gap:8px;
    }
    .checklist li{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(142,113,88,.18);
      background: linear-gradient(180deg, rgba(251,246,239,.92), rgba(225,182,182,.18));
    }
    .checklist input{
      margin-top: 2px;
      accent-color: var(--gold);
      width: 18px;
      height: 18px;
      flex: 0 0 auto;
    }
    .checklist label{
      cursor:pointer;
      display:block;
      font-size:15px;
    }

    /* Steps */
    ol.steps{
      margin:0;
      padding-left: 18px;
    }
    ol.steps li{
      margin: 8px 0;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(142,113,88,.16);
      background: rgba(251,246,239,.70);
    }

    /* Notes */
    .notes{
      border-left: 3px solid var(--gold);
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(225,182,182,.18);
      color: rgba(26,47,35,.84);
      font-size: 13.5px;
    }

    /* Controls */
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    button{
      border: 1px solid rgba(142,113,88,.45);
      background: linear-gradient(180deg, rgba(225,182,182,.35), rgba(251,246,239,.95));
      color: var(--ink);
      padding: 12px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-size: 13px;
      transition: transform .08s ease;
    }
    .controls button{ width: 100%; }
    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0); }

    /* Collapsible */
    details{
      border-radius: 18px;
      border: 1px solid rgba(142,113,88,.20);
      background: rgba(255,255,255,.94);
      box-shadow: 0 10px 24px rgba(0,0,0,.05);
      overflow:hidden;
    }
    summary{
      cursor:pointer;
      padding: 14px 12px;
      list-style:none;
      font-weight:500;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    summary::-webkit-details-marker{display:none;}
    summary::after{
      content:'▼';
      font-size:11px;
      color:var(--gold);
      transition: transform .15s ease;
    }
    details[open] summary::after{ transform:rotate(180deg); }
    details .inner{ padding: 0 12px 14px; }

    /* Divider / Chapter */
    .divider-page{
      display:flex;
      align-items:center;
      justify-content:center;
      background:
        linear-gradient(160deg, rgba(225,182,182,.55), rgba(251,246,239,.90)),
        radial-gradient(900px 450px at 50% 50%, rgba(26,47,35,.04), transparent 60%);
      border-radius: var(--radius);
      border: 1px solid rgba(142,113,88,.28);
      box-shadow: var(--shadow);
      padding:50px 18px;
      margin: 48px 0 32px;
    }
    .divider-page h2{
      font-family: var(--serif);
      font-size: clamp(26px, 4.5vw, 36px);
      letter-spacing: .5px;
      margin:0;
      text-align:center;
    }

    /* Splash Screen */
    #splash{
      position:fixed;
      inset:0;
      z-index:9999;
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(225,182,182,.60), transparent 55%),
        radial-gradient(1000px 650px at 90% 15%, rgba(142,113,88,.22), transparent 55%),
        linear-gradient(180deg, var(--cream), #fff);
      display:grid;
      place-content:center;
      text-align:center;
      padding:18px;
    }
    #splash h1{
      font-family: var(--serif);
      font-size: clamp(38px, 7vw, 56px);
      margin:0 0 10px;
      letter-spacing: .6px;
    }
    #splash p{
      margin: 10px 0 0;
      font-size: 16px;
      color: rgba(26,47,35,.78);
      max-width:500px;
    }
    .splash-btn{
      margin-top: 28px;
      padding: 16px 28px;
      border: 1px solid rgba(142,113,88,.45);
      background: linear-gradient(180deg, rgba(225,182,182,.45), rgba(251,246,239,1));
      border-radius: 18px;
      font-size: 16px;
      cursor:pointer;
      transition: transform .15s ease;
      display:inline-block;
      text-decoration:none;
      color:var(--ink);
    }
    .splash-btn:hover{ transform: translateY(-2px); }

    /* TOC Sidebar */
    .toc-backdrop{
      position:fixed;
      inset:0;
      background: rgba(26,47,35,.35);
      backdrop-filter: blur(2px);
      z-index:1000;
      display:none;
    }
    .toc-backdrop.open{ display:block; }

    .toc-panel{
      position:fixed;
      top:0;
      right:0;
      bottom:0;
      width: min(370px, 85vw);
      background: var(--paper);
      box-shadow: -6px 0 28px rgba(0,0,0,.2);
      transform: translateX(100%);
      transition: transform .25s ease;
      overflow-y:auto;
      z-index:1001;
    }
    .toc-panel.open{ transform: translateX(0); }

    .toc-header{
      position:sticky;
      top:0;
      background: linear-gradient(180deg, var(--cream), var(--paper));
      padding: 18px 16px;
      border-bottom: 1px solid rgba(142,113,88,.20);
      display:flex;
      justify-content:space-between;
      align-items:center;
      z-index:10;
    }
    .toc-header h2{
      margin:0;
      font-family: var(--serif);
      font-size: 20px;
    }
    .close-toc{
      border:none;
      background:none;
      font-size:24px;
      cursor:pointer;
      padding:4px;
      color:var(--ink);
    }

    .toc-list{
      list-style:none;
      padding:0;
      margin:12px;
    }
    .toc-list li{
      margin: 8px 0;
    }
    .toc-list a{
      display:block;
      padding: 10px 10px;
      border-radius: 12px;
      color: var(--ink);
      text-decoration:none;
      transition: background .1s ease;
    }
    .toc-list a:hover{
      background: rgba(225,182,182,.18);
    }

    /* FAB */
    .toc-fab{
      position:fixed;
      bottom: 22px;
      right: 22px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(225,182,182,.92), rgba(142,113,88,.88));
      border: 1px solid rgba(142,113,88,.45);
      box-shadow: 0 8px 22px rgba(26,47,35,.22);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 22px;
      color:#fff;
      transition: transform .15s ease;
      z-index:999;
    }
    .toc-fab:hover{ transform: scale(1.06); }

    /* Footer link */
    .footer{
      margin-top: 48px;
      text-align:center;
      font-size:13px;
      color: rgba(26,47,35,.72);
    }
    .footer a{
      color: var(--gold);
      text-decoration:none;
    }
    .footer a:hover{ text-decoration:underline; }
  </style>
</head>
<body>
<!-- Splash Screen -->
<div id="splash">
<div>
<h1>Family Recipes</h1>
<div class="gold-rule" style="margin:16px auto;"></div>
<p>
        A digital collection of treasured handwritten and typed recipes,
        now with interactive features.
      </p>
<button class="splash-btn" onclick="enterCookbook()" type="button">Open Cookbook</button>
<p style="margin-top:32px; font-size:14px;">
        Or jump to:
        <a href="#" onclick="enterAndGo('#peach-cobbler'); return false;" style="color:var(--gold); margin:0 8px;">Peach Cobbler</a>
        <a href="#" onclick="enterAndGo('#texas-chowchow'); return false;" style="color:var(--gold); margin:0 8px;">Texas Chow-Chow</a>
</p>
</div>
</div>
<!-- TOC -->
<div class="toc-backdrop" id="tocBackdrop" onclick="closeTOC()"></div>
<aside aria-hidden="true" class="toc-panel" id="tocPanel">
<div class="toc-header">
<h2>Table of Contents</h2>
<button aria-label="Close menu" class="close-toc" onclick="closeTOC()" type="button">×</button>
</div>
<ul class="toc-list">
<li><a href="#peach-cobbler" onclick="closeTOC()">Peach Cobbler</a></li>
<li><a href="#egg-custard" onclick="closeTOC()">Old-Fashioned Egg Custard</a></li>
<li><a href="#sweet-potato-pie" onclick="closeTOC()">Sweet Potato Pie</a></li>
<li><a href="#texas-chowchow" onclick="closeTOC()">Texas Chow-Chow</a></li>
<li><a href="#collard-greens" onclick="closeTOC()">Instant Pot Southern Collard Greens</a></li>
<li><a href="#source" onclick="closeTOC()">Source Notes</a></li>
</ul>
</aside>
<button aria-expanded="false" aria-label="Open table of contents" class="toc-fab" onclick="toggleTOC()" type="button">☰</button>
<!-- Main Content -->
<div class="wrap">
<main class="card" id="top">
<!-- Cover inside the cookbook (hidden once user enters) -->
<div class="cover">
<div class="inner">
<div>
<h1 class="title">Family Recipes</h1>
<p class="subtitle">
            Heritage favorites, transcribed from handwritten and typed pages. Now with interactive checklists and print options.
          </p>
<div class="gold-rule"></div>
</div>
<span class="badge">Interactive Edition</span>
</div>
</div>
<!-- Peach Cobbler -->
<section class="section" id="peach-cobbler">
<h2>Peach Cobbler</h2>
<div class="meta">
<span class="pill">Dessert</span>
<span class="pill">Bake 350°F, 50 min</span>
</div>
</section>
<div class="content">
<div class="box">
<h3>Ingredients</h3>
<ul class="checklist" data-group="peachCobbler">
<li><input id="pc1" type="checkbox"/><label for="pc1">1 stick butter</label></li>
<li><input id="pc2" type="checkbox"/><label for="pc2">2 cups self-rising flour</label></li>
<li><input id="pc3" type="checkbox"/><label for="pc3">2 cups sugar</label></li>
<li><input id="pc4" type="checkbox"/><label for="pc4">2 cups sweet milk</label></li>
<li><input id="pc5" type="checkbox"/><label for="pc5">1 (29-oz) can sliced peaches (or 2 cups of fresh)</label></li>
</ul>
<div class="controls">
<button onclick="resetGroup('peachCobbler')" type="button">Reset checkboxes</button>
<button onclick="printSection('peach-cobbler')" type="button">Print this recipe</button>
</div>
</div>
<div class="box">
<h3>Directions</h3>
<ol class="steps">
<li>Preheat oven to 350°F.</li>
<li>Melt butter in a 9×13-inch baking dish.</li>
<li>In a bowl, mix the flour and sugar. Stir in the milk to make a smooth batter.</li>
<li>Pour the batter over the melted butter in the baking dish. Do not stir.</li>
<li>Spoon the peaches and a bit of their juice over the batter. Do not stir.</li>
<li>Bake for about 50 minutes, or until golden and bubbling.</li>
</ol>
<p class="notes">
            Note: The cobbler self-assembles into layers as it bakes. Enjoy warm with vanilla ice cream!
          </p>
</div>
</div>
<!-- Old-Fashioned Egg Custard -->
<section class="section" id="egg-custard">
<h2>Old-Fashioned Egg Custard</h2>
<div class="meta">
<span class="pill">Dessert</span>
<span class="pill">Stovetop</span>
</div>
</section>
<div class="content">
<div class="box">
<h3>Ingredients</h3>
<ul class="checklist" data-group="eggCustard">
<li><input id="ec1" type="checkbox"/><label for="ec1">3 eggs</label></li>
<li><input id="ec2" type="checkbox"/><label for="ec2">¾ cup sugar</label></li>
<li><input id="ec3" type="checkbox"/><label for="ec3">1 tablespoon vanilla extract</label></li>
<li><input id="ec4" type="checkbox"/><label for="ec4">3 cups milk (divided)</label></li>
<li><input id="ec5" type="checkbox"/><label for="ec5">¼ cup cornstarch</label></li>
<li><input id="ec6" type="checkbox"/><label for="ec6">½ stick (4 tablespoons) butter</label></li>
</ul>
<div class="controls">
<button onclick="resetGroup('eggCustard')" type="button">Reset checkboxes</button>
<button onclick="printSection('egg-custard')" type="button">Print this recipe</button>
</div>
</div>
<div class="box">
<h3>Instructions</h3>
<ol class="steps">
<li>In a medium saucepan, combine eggs, sugar, and vanilla. Stir well.</li>
<li>Add 2½ cups of milk and whisk to combine.</li>
<li>In a small bowl, mix the remaining ½ cup of milk with the cornstarch until smooth.</li>
<li>Add the cornstarch slurry to the saucepan and whisk until incorporated.</li>
<li>Add the butter and place the saucepan over medium heat.</li>
<li>Cook, stirring constantly, until the mixture thickens (around 10 minutes).</li>
<li>Remove from heat. Pour into serving dishes and chill.</li>
</ol>
<p class="notes">
            Serve chilled. Top with fresh berries or a sprinkle of nutmeg if desired.
          </p>
</div>
</div>
<!-- Sweet Potato Pie -->
<section class="section" id="sweet-potato-pie">
<h2>Sweet Potato Pie</h2>
<div class="meta">
<span class="pill">Dessert</span>
<span class="pill">Bake 350°F, 35 min</span>
</div>
</section>
<div class="content">
<div class="box">
<h3>Ingredients</h3>
<ul class="checklist" data-group="sweetPotatoPie">
<li><input id="spp1" type="checkbox"/><label for="spp1">1½ cups mashed cooked sweet potatoes</label></li>
<li><input id="spp2" type="checkbox"/><label for="spp2">1 cup sugar</label></li>
<li><input id="spp3" type="checkbox"/><label for="spp3">3 eggs</label></li>
<li><input id="spp4" type="checkbox"/><label for="spp4">½ stick (4 tablespoons) butter, melted</label></li>
<li><input id="spp5" type="checkbox"/><label for="spp5">1 (5-oz) can evaporated milk</label></li>
<li><input id="spp6" type="checkbox"/><label for="spp6">1 teaspoon vanilla extract</label></li>
<li><input id="spp7" type="checkbox"/><label for="spp7">½ teaspoon nutmeg</label></li>
<li><input id="spp8" type="checkbox"/><label for="spp8">1 unbaked 9-inch pie shell</label></li>
</ul>
<div class="controls">
<button onclick="resetGroup('sweetPotatoPie')" type="button">Reset checkboxes</button>
<button onclick="printSection('sweet-potato-pie')" type="button">Print this recipe</button>
</div>
</div>
<div class="box">
<h3>Directions</h3>
<ol class="steps">
<li>Preheat oven to 350°F.</li>
<li>In a large bowl, combine mashed sweet potatoes, sugar, eggs, melted butter, evaporated milk, vanilla, and nutmeg. Mix well until smooth.</li>
<li>Pour filling into the unbaked pie shell.</li>
<li>Bake for about 35 minutes, or until the filling is set and slightly puffed.</li>
<li>Cool to room temperature before serving.</li>
</ol>
<p class="notes">
            For extra sweetness, top with whipped cream or marshmallows during the last few minutes of baking.
          </p>
</div>
</div>
<!-- Texas Chow-Chow -->
<section class="section" id="texas-chowchow">
<h2>Texas Chow-Chow</h2>
<div class="meta">
<span class="pill">Preserved</span>
<span class="pill">Canning</span>
<span class="pill">Heritage</span>
</div>
</section>
<div class="content">
<div class="box">
<h3>Ingredients</h3>
<ul class="checklist" data-group="chowchow">
<li><input id="tc1" type="checkbox"/><label for="tc1">6 lbs tomatoes (green or red)</label></li>
<li><input id="tc2" type="checkbox"/><label for="tc2">7 lbs onions</label></li>
<li><input id="tc3" type="checkbox"/><label for="tc3">10 lbs cabbage</label></li>
<li><input id="tc4" type="checkbox"/><label for="tc4">¼ lb hot peppers (mixed red &amp; green)</label></li>
<li><input id="tc5" type="checkbox"/><label for="tc5">4 bell peppers (2 red, 2 green)</label></li>
<li><input id="tc6" type="checkbox"/><label for="tc6">10 lbs sugar</label></li>
<li><input id="tc7" type="checkbox"/><label for="tc7">3 quarts apple cider vinegar</label></li>
</ul>
<div class="controls">
<button onclick="resetGroup('chowchow')" type="button">Reset checkboxes</button>
<button onclick="printSection('texas-chowchow')" type="button">Print this recipe</button>
</div>
</div>
<div class="box">
<h3>Directions (heritage-style)</h3>
<ol class="steps">
<li>Chop tomatoes, onions, peppers, and cabbage.</li>
<li>Sprinkle lightly with salt and refrigerate overnight.</li>
<li>Drain excess liquid the next day.</li>
<li>Cook with sugar and apple cider vinegar until the mixture is tender and the liquid reduces to your preferred consistency.</li>
<li>Jar using proper canning practices, or refrigerate for short-term use.</li>
</ol>
<p class="notes">
            Notes: The handwritten instructions are partially abbreviated.
          </p>
</div>
</div>
<!-- Instant Pot Southern Collard Greens -->
<section class="section" id="collard-greens">
<h2>Instant Pot Southern Collard Greens</h2>
<div class="meta">
<span class="pill">Savory</span>
<span class="pill">Instant Pot</span>
<span class="pill">25 minutes (High Pressure)</span>
</div>
</section>
<div class="content">
<div class="box">
<h3>Ingredients</h3>
<ul class="checklist" data-group="collards">
<li><input id="cg1" type="checkbox"/><label for="cg1">1 tablespoon olive oil</label></li>
<li><input id="cg2" type="checkbox"/><label for="cg2">1 cup chopped white onion</label></li>
<li><input id="cg3" type="checkbox"/><label for="cg3">2 garlic cloves, minced</label></li>
<li><input id="cg4" type="checkbox"/><label for="cg4">1 pound collard greens, trimmed and washed (pre-washed ok)</label></li>
<li><input id="cg5" type="checkbox"/><label for="cg5">Optional: mix greens (often ¾ collards + ¼ mustard greens)</label></li>
<li><input id="cg6" type="checkbox"/><label for="cg6">1 smoked turkey leg or turkey wing (about 1 to 1½ pounds), fully cooked (or ham hocks)</label></li>
<li><input id="cg7" type="checkbox"/><label for="cg7">1½ cups chicken broth</label></li>
<li><input id="cg8" type="checkbox"/><label for="cg8">½ tablespoon Creole seasoning</label></li>
</ul>
<div class="controls">
<button onclick="resetGroup('collards')" type="button">Reset checkboxes</button>
<button onclick="printSection('collard-greens')" type="button">Print this recipe</button>
</div>
</div>
<div class="box">
<h3>Instructions</h3>
<ol class="steps">
<li>Place the Instant Pot on the Sauté function. Add olive oil and onions.</li>
<li>Cook 2–3 minutes until translucent and fragrant.</li>
<li>Add garlic and stir.</li>
<li>Add half of the collard greens to the pot. Layer in the turkey leg, then add remaining greens.</li>
<li>Add chicken broth and Creole seasoning.</li>
<li>Place lid on and seal.</li>
<li>Cook for 25 minutes on Manual &gt; High Pressure.</li>
<li>When finished, quick release the steam.</li>
<li>Open, remove turkey, shred meat from the bone, return meat to the pot. Stir and serve.</li>
</ol>
</div>
</div>

<!-- Dynamic Recipes Container -->
<div id="dynamic-recipes-container"></div>

<!-- Source + End -->
<section class="section" id="source">
<h2>Source Notes</h2>
</section>
<div class="content" style="margin-bottom:0;">
<div class="box" style="grid-column:1/-1;">
<p class="notes" style="margin:0;">
            All recipes above were transcribed from handwritten and typed pages. Dynamic recipes loaded from Google Sheets.
          </p>
<div class="controls">
<button onclick="window.location.href='#top'" type="button">Back to top</button>
</div>
</div>
</div>
</main>
<div class="footer">
      Interactive checklists • Print-friendly layout •
      <a class="show-cover" href="#" onclick="showCover(); return false;">Show cover</a>
</div>
</div>

<script>
    // Reset all checkboxes within a named group
    function resetGroup(groupName){
      const group = document.querySelectorAll('[data-group="' + groupName + '"] input[type="checkbox"]');
      group.forEach(cb => cb.checked = false);
    }

    // Print a single recipe section by cloning it into a temporary window
    function printSection(sectionId){
      const section = document.getElementById(sectionId);
      if(!section) return;

      const nodes = [];
      let current = section;
      nodes.push(current.cloneNode(true));

      current = section.nextElementSibling;
      while(current && !current.classList.contains('section') && !current.classList.contains('divider-page')){
        nodes.push(current.cloneNode(true));
        current = current.nextElementSibling;
      }

      const printWin = window.open('', '_blank', 'width=900,height=650');
      const styles = document.querySelector('style').innerHTML;

      printWin.document.write(`
        <html>
          <head>
            <title>Print Recipe</title>
            <meta charset="utf-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
            <style>${styles}</style>
          </head>
          <body>
            <div class="wrap" style="grid-template-columns:1fr; max-width:900px;">
              <main class="card">
                ${nodes.map(n => n.outerHTML).join('')}
              </main>
            </div>
            <script>
              document.querySelectorAll('button').forEach(b => b.style.display='none');
              window.onload = () => window.print();
            <\/script>
          </body>
        </html>
      `);
      printWin.document.close();
    }

    // TOC panel
    function toggleTOC(){
      const panel = document.getElementById('tocPanel');
      const backdrop = document.getElementById('tocBackdrop');
      const fab = document.querySelector('.toc-fab');

      const isOpen = panel.classList.toggle('open');
      backdrop.classList.toggle('open', isOpen);

      panel.setAttribute('aria-hidden', (!isOpen).toString());
      fab.setAttribute('aria-expanded', isOpen.toString());

      document.body.style.overflow = isOpen ? 'hidden' : '';
    }

    function closeTOC(){
      const panel = document.getElementById('tocPanel');
      const backdrop = document.getElementById('tocBackdrop');
      const fab = document.querySelector('.toc-fab');

      panel.classList.remove('open');
      backdrop.classList.remove('open');
      panel.setAttribute('aria-hidden','true');
      fab.setAttribute('aria-expanded','false');
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape') closeTOC();
    });

    // Splash behavior
    function enterCookbook(){
      const splash = document.getElementById('splash');
      if(splash) splash.style.display = 'none';
      try { sessionStorage.setItem('cookbookEntered', '1'); } catch(e){}
    }

    function enterAndGo(hash){
      enterCookbook();
      setTimeout(() => { window.location.hash = hash; }, 10);
    }

    function showCover(){
      const splash = document.getElementById('splash');
      if(splash) splash.style.display = 'grid';
      try { sessionStorage.removeItem('cookbookEntered'); } catch(e){}
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Optional: hide splash if already entered this session
    (function(){
      try{
        if(sessionStorage.getItem('cookbookEntered') === '1'){
          const splash = document.getElementById('splash');
          if(splash) splash.style.display = 'none';
        }
      } catch(e){}
    })();
</script>

<script>
// ============================================================================
// GOOGLE SHEETS DYNAMIC RECIPE LOADER
// ============================================================================

// Your Google Sheet must be published to web as CSV
// Instructions:
// 1. In Google Sheets: File > Share > Publish to web
// 2. Choose "Entire Document" or specific sheet
// 3. Select "Comma-separated values (.csv)" format
// 4. Click Publish and copy the URL
// 5. Replace the URL below with your published CSV URL

const GOOGLE_SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSfZkZn3OuZSWMbxsASOLj0adOB7Navcv5lQ0L_XH-Wl5l0YpWLwboQsXBalf0tqBkDN_ZQp0dnrAva/pub?output=csv';

// Expected CSV columns (in order):
// Timestamp, Title, Category, Tags, Time, Ingredients, Directions, Notes

let recipeCounter = 0; // For generating unique IDs

function sanitizeId(str) {
  return str.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
}

function parseCSV(text) {
  const lines = text.split('\n');
  const result = [];
  
  for (let i = 1; i < lines.length; i++) { // Skip header row
    const line = lines[i].trim();
    if (!line) continue;
    
    const row = line.split(',').map(cell => cell.trim());
    result.push(row);
  }
  
  return result;
}

function createDynamicRecipe(data) {
  // Skip timestamp in column A (index 0)
  const [timestamp, title, category, tags, time, ingredients, directions, notes] = data;
  
  if (!title) return ''; // Skip empty rows
  
  recipeCounter++;
  const recipeId = sanitizeId(title) || `recipe-${recipeCounter}`;
  const groupName = `dynamic-${recipeCounter}`;
  
  // Parse tags (comma-separated)
  const tagsList = tags ? tags.split('|').map(t => t.trim()).filter(Boolean) : [];
  
  // Parse ingredients (line-separated with | or newline)
  const ingredientsList = ingredients ? ingredients.split('|').map(i => i.trim()).filter(Boolean) : [];
  
  // Parse directions (line-separated with | or newline)
  const directionsList = directions ? directions.split('|').map(d => d.trim()).filter(Boolean) : [];
  
  // Build the pills (tags + time if provided)
  let pillsHTML = '';
  if (category) {
    pillsHTML += `<span class="pill">${category}</span>`;
  }
  tagsList.forEach(tag => {
    pillsHTML += `<span class="pill">${tag}</span>`;
  });
  if (time) {
    pillsHTML += `<span class="pill">${time}</span>`;
  }
  
  // Build ingredients checklist
  let ingredientsHTML = '';
  ingredientsList.forEach((ingredient, idx) => {
    const inputId = `${groupName}-ing-${idx}`;
    ingredientsHTML += `
      <li>
        <input id="${inputId}" type="checkbox"/>
        <label for="${inputId}">${ingredient}</label>
      </li>
    `;
  });
  
  // Build directions steps
  let directionsHTML = '';
  directionsList.forEach(step => {
    directionsHTML += `<li>${step}</li>`;
  });
  
  // Build notes section
  let notesHTML = '';
  if (notes) {
    notesHTML = `<p class="notes">${notes}</p>`;
  }
  
  // Assemble the complete recipe HTML matching your format
  return `
    <section class="section" id="${recipeId}">
      <h2>${title}</h2>
      ${pillsHTML ? `<div class="meta">${pillsHTML}</div>` : ''}
    </section>
    <div class="content">
      <div class="box">
        <h3>Ingredients</h3>
        <ul class="checklist" data-group="${groupName}">
          ${ingredientsHTML}
        </ul>
        <div class="controls">
          <button type="button" onclick="resetGroup('${groupName}')">Reset checkboxes</button>
          <button type="button" onclick="printSection('${recipeId}')">Print this recipe</button>
        </div>
      </div>
      <div class="box">
        <h3>Directions</h3>
        <ol class="steps">
          ${directionsHTML}
        </ol>
        ${notesHTML}
      </div>
    </div>
  `;
}

function loadDynamicRecipes() {
  // Don't load if URL is not configured
  if (!GOOGLE_SHEET_CSV_URL || GOOGLE_SHEET_CSV_URL === 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSfZkZn3OuZSWMbxsASOLj0adOB7Navcv5lQ0L_XH-Wl5l0YpWLwboQsXBalf0tqBkDN_ZQp0dnrAva/pub?output=csvE') {
    console.log('Google Sheets CSV URL not configured. Skipping dynamic recipes.');
    return;
  }
  
  fetch(GOOGLE_SHEET_CSV_URL)
    .then(response => {
      if (!response.ok) throw new Error('Failed to fetch Google Sheet');
      return response.text();
    })
    .then(csvText => {
      const rows = parseCSV(csvText);
      const container = document.getElementById('dynamic-recipes-container');
      
      if (!container) {
        console.error('Dynamic recipes container not found');
        return;
      }
      
      let recipesHTML = '';
      rows.forEach(row => {
        recipesHTML += createDynamicRecipe(row);
      });
      
      container.innerHTML = recipesHTML;
      
      // Update TOC if needed
      updateTOC();
      
      console.log(`Loaded ${rows.length} dynamic recipes from Google Sheets`);
    })
    .catch(error => {
      console.error('Error loading dynamic recipes:', error);
    });
}

function updateTOC() {
  // Optional: Dynamically update the table of contents
  const tocList = document.querySelector('.toc-list');
  if (!tocList) return;
  
  // Find all section headers
  const allSections = document.querySelectorAll('.section[id]');
  
  // Clear existing TOC (except last "Source Notes" item)
  tocList.innerHTML = '';
  
  allSections.forEach(section => {
    const id = section.id;
    const title = section.querySelector('h2')?.textContent || 'Untitled';
    
    if (id !== 'source') { // Don't duplicate source notes
      const li = document.createElement('li');
      li.innerHTML = `<a href="#${id}" onclick="closeTOC()">${title}</a>`;
      tocList.appendChild(li);
    }
  });
  
  // Add source notes back at the end
  const li = document.createElement('li');
  li.innerHTML = `<a href="#source" onclick="closeTOC()">Source Notes</a>`;
  tocList.appendChild(li);
}

// Load recipes when page loads
window.addEventListener('DOMContentLoaded', loadDynamicRecipes);
</script>

</body>
</html>
